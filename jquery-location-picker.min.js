$(function(t){var n;t.fn.locationPicker=function(e,a){n=t.extend({mapOptions:t.extend({center:{lat:-7.259258,lng:112.7931297},scrollwheel:!0,zoom:17},e),height:320,latInputName:"latitude",lngInputName:"longitude",click:function(){},change:function(){},map:null,latInput:null,lngInput:null,searchInput:null,mapElement:null,changeLocation:function(t,n){this.latInput&&this.lngInput&&(this.marker&&this.marker.setMap(null),this.marker=null,this.marker=new google.maps.Marker({map:this.map,position:{lat:t,lng:n},title:"Picked Location"}),this.latInput.val(t),this.lngInput.val(n),this.change({lat:t,lng:n}))}},a),n.mapElement=t(document.createElement("div")).css({height:n.height}),n.latInput=t(document.createElement("input")).attr("type","hidden").attr("name",n.latInputName).addClass("location-picker-input-latitude"),n.lngInput=t(document.createElement("input")).attr("type","hidden").attr("name",n.lngInputName).addClass("location-picker-input-longitude"),n.searchInput=t(document.createElement("input")).attr("type","text").attr("placeholder","Search location, city, address ..").addClass("location-picker-input-search").css({margin:"10px 0",padding:"8px",width:"50%",border:"#f0f0f0",borderRadius:"2px",boxShadow:"0px 2px 1px #c0c0c0"}),this.css({height:n.height}).append(n.searchInput).append(n.mapElement).append(n.latInput).append(n.lngInput),n.map=new google.maps.Map(n.mapElement[0],n.mapOptions);var l=new google.maps.places.SearchBox(n.searchInput[0]);return n.map.controls[google.maps.ControlPosition.TOP_LEFT].push(n.searchInput[0]),n.map.addListener("bounds_changed",function(){l.setBounds(n.map.getBounds())}),n.map.addListener("click",function(t){var e={lat:t.latLng.lat(),lng:t.latLng.lng()};n.click(e),n.changeLocation(e.lat,e.lng)}),l.addListener("places_changed",function(){var t=l.getPlaces();if(0!=t.length){var e=new google.maps.LatLngBounds,a=t[0];n.changeLocation(a.geometry.location.lat(),a.geometry.location.lng()),a.geometry.viewport?e.union(a.geometry.viewport):e.extend(a.geometry.location),n.map.fitBounds(e)}}),n.changeLocation(n.mapOptions.center.lat,n.mapOptions.center.lng),this}});