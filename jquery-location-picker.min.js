$(function(t){var n;t.fn.locationPicker=function(e,a){n=t.extend({mapOptions:t.extend({center:{lat:-7.259258,lng:112.7931297},scrollwheel:!0,zoom:17},e),height:320,latInputName:"latitude",lngInputName:"longitude",addressInputName:"address",click:function(){},change:function(){},map:null,latInput:null,lngInput:null,addressInput:null,searchInput:null,mapElement:null,showInfo:!1,changeLocation:function(n,e){var a=this;a.latInput&&a.lngInput&&(a.marker&&a.marker.setMap(null),a.marker=null,a.marker=new google.maps.Marker({map:a.map,position:{lat:n,lng:e},title:"Picked Location"}),a.latInput.val(n),a.lngInput.val(e),a.change({lat:n,lng:e}),t.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+n+","+e,function(t){a.addressInput.val(t.results[0].formatted_address)}))}},a),this.css({MinHeight:n.height}),n.mapElement=t(document.createElement("div")).css({height:n.height}),this.append(n.mapElement),null==n.latInput&&(n.latInput=t(document.createElement("input")).attr("type",n.showInfo?"text":"hidden").attr("name",n.latInputName).attr("readonly","").css({borderRadius:0,display:"inline-block",width:"50%"}).addClass("location-picker-co-input-latitude form-control"),this.append(n.latInput)),null==n.lngInput&&(n.lngInput=t(document.createElement("input")).attr("type",n.showInfo?"text":"hidden").attr("name",n.lngInputName).attr("readonly","").css({borderRadius:0,display:"inline-block",width:"50%"}).addClass("location-picker-co-input-longitude form-control"),this.append(n.lngInput)),null==n.addressInput&&(n.addressInput=t(document.createElement("input")).attr("type",n.showInfo?"text":"hidden").attr("name",n.addressInputName).attr("readonly","").css({borderRadius:0}).addClass("location-picker-input-address form-control")),this.append(n.addressInput),n.searchInput=t(document.createElement("input")).attr("type","text").attr("placeholder","Search location, city, address ..").addClass("location-picker-input-search").css({margin:"10px 0",padding:"8px",width:"50%",border:"#f0f0f0",borderRadius:"2px",boxShadow:"0px 2px 1px #c0c0c0"}),this.append(n.searchInput),n.map=new google.maps.Map(n.mapElement[0],n.mapOptions);var o=new google.maps.places.SearchBox(n.searchInput[0]);return n.map.controls[google.maps.ControlPosition.TOP_LEFT].push(n.searchInput[0]),n.map.addListener("bounds_changed",function(){o.setBounds(n.map.getBounds())}),n.map.addListener("click",function(t){var e={lat:t.latLng.lat(),lng:t.latLng.lng()};n.click(e),n.changeLocation(e.lat,e.lng)}),o.addListener("places_changed",function(){var t=o.getPlaces();if(0!=t.length){var e=new google.maps.LatLngBounds,a=t[0];n.changeLocation(a.geometry.location.lat(),a.geometry.location.lng()),a.geometry.viewport?e.union(a.geometry.viewport):e.extend(a.geometry.location),n.map.fitBounds(e)}}),n.changeLocation(n.mapOptions.center.lat,n.mapOptions.center.lng),this}});